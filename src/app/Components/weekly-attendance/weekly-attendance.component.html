<div class="attendance-container">
  <div class="attendance-header">
    <h2>Week to Week Attendance</h2>
    <div class="date-navigation">
      <!-- Previous Day Button -->
      <button class="nav-btn prev-btn" (click)="changeDay(-7)">
        <i class="bi bi-chevron-left"></i>
      </button>

      <!-- Date Picker with Today as Default -->
      <div class="day-picker">
        <input type="date" 
               [(ngModel)]="dateInput" 
               (change)="onDateChange()" 
               class="form-control"
               [value]="dateInput">
      </div>

      <!-- Next Day Button -->
      <button class="nav-btn next-btn" (click)="changeDay(7)">
        <i class="bi bi-chevron-right"></i>
      </button>

      <!-- Date picker
      <div class="day-picker">
        <input type="date" [(ngModel)]="selectedDate" (change)="onDateChange()" class="form-control">
      </div> -->
    </div>
  </div>

  <div class="attendance-card" *ngIf="dailyAttendanceData.length > 0; else noData">
    <div class="table-responsive">
      <table class="table table-hover">
        <thead>
          <tr>
            <th>Date</th>  <!-- New column header -->
            <th>Check-In Time</th>
            <th>Check-Out Time</th>
            <th>Working Hours</th>
            <th>Status</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let record of filteredRecords">
            <td>
              {{ getDayName(record.checkInTime) }} - {{ record.checkInTime | date:'dd-MM-yyyy' }}
            </td>
            <td>{{ record.checkInTime | date:'shortTime' }}</td>
            <td>{{ record.checkOutTime ? (record.checkOutTime | date:'shortTime') : '-' }}</td>
            <td>{{ calculateWorkingHours(record.checkInTime, record.checkOutTime) }}</td>
            <td>
              <span class="badge" [ngClass]="{
                'bg-success': record.checkOutTime,
                'bg-warning': !record.checkOutTime
              }">
                {{ record.checkOutTime ? 'Completed' : 'Working' }}
              </span>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>

  <ng-template #noData>
    <div class="no-data">
      <i class="bi bi-calendar-x"></i>
      <p>No attendance records found for {{ selectedDate | date:'fullDate' }}</p>
    </div>
  </ng-template>
</div>